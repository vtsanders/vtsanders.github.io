<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  
  
  <meta name="generator" content="Wowchemy 4.8.0 for Hugo">
  

  

  
  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Venchei T. Sanders">

  
  
  
    
  
  <meta name="description" content="How Analytics Drive ML Model Development (in Industry)">

  
  <link rel="alternate" hreflang="en-us" href="https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/">

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  

  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.css" integrity="sha512-1xoFisiGdy9nvho8EgXuXvnpR5GAMSjFwp40gSRE3NwdUdIMIKuPa7bqoUhLD0O/5tPNhteAsE5XyyMi5reQVA==" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js" integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    

  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
    
  

  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.css">

  





<script async src="https://www.googletagmanager.com/gtag/js?id=UA-159069427-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];

  function gtag() {
      dataLayer.push(arguments);
  }

  function trackOutboundLink(url, target) {
    gtag('event', 'click', {
         'event_category': 'outbound',
         'event_label': url,
         'transport_type': 'beacon',
         'event_callback': function () {
           if (target !== '_blank') {
             document.location = url;
           }
         }
    });
    console.debug("Outbound link clicked: " + url);
  }

  function onClickCallback(event) {
    if ((event.target.tagName !== 'A') || (event.target.host === window.location.host)) {
      return;
    }
    trackOutboundLink(event.target, event.target.getAttribute('target'));  
  }

  gtag('js', new Date());
  gtag('config', 'UA-159069427-1', {});

  
  document.addEventListener('click', onClickCallback, false);
</script>


  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu9edd35c8d19bcbbe91efc6de46be8625_97850_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu9edd35c8d19bcbbe91efc6de46be8625_97850_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@davencheicodes">
  <meta property="twitter:creator" content="@davencheicodes">
  
  <meta property="og:site_name" content="Da Venchei Codes">
  <meta property="og:url" content="https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/">
  <meta property="og:title" content="Shop Time and the Area of a Square - Industry Insider Take | Da Venchei Codes">
  <meta property="og:description" content="How Analytics Drive ML Model Development (in Industry)"><meta property="og:image" content="https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/featured.jpg">
  <meta property="twitter:image" content="https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/featured.jpg"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2021-01-11T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2021-01-19T00:00:00&#43;00:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/"
  },
  "headline": "Shop Time and the Area of a Square - Industry Insider Take",
  
  "image": [
    "https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/featured.jpg"
  ],
  
  "datePublished": "2021-01-11T00:00:00Z",
  "dateModified": "2021-01-19T00:00:00Z",
  
  "author": {
    "@type": "Person",
    "name": "Venchei T. Sanders"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Da Venchei Codes",
    "logo": {
      "@type": "ImageObject",
      "url": "https://davencheicodes.com/images/icon_hu9edd35c8d19bcbbe91efc6de46be8625_97850_192x192_fill_lanczos_center_2.png"
    }
  },
  "description": "How Analytics Drive ML Model Development (in Industry)"
}
</script>

  

  


  


  





  <title>Shop Time and the Area of a Square - Industry Insider Take | Da Venchei Codes</title>

</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class=" ">

  
  
  
    <script>window.wcDarkLightEnabled = true;</script>
  
  
    <script>const isSiteThemeDark = false;</script>
  
  
  <script src="/js/load-theme.js"></script>

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  












<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Da Venchei Codes</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Da Venchei Codes</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/about"><span>About Me</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/post"><span>Blog</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
            
            
            
              
            
            
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#contact"><span>Contact Me</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/files/resume/VSanders_BResume_current.pdf"><span>Resume</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-moon" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>



  <article class="article">

  




















  
  
    
  


<div class="article-container pt-3">
  <h1>Shop Time and the Area of a Square - Industry Insider Take</h1>

  
  <p class="page-subtitle">How Analytics Drive ML Model Development (in Industry)</p>
  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
          Last updated on
      
    
    Jan 19, 2021
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    16 min read
  </span>
  

  
  
  

  
  

</div>

  














</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 540px;">
  <div style="position: relative">
    <img src="/post/2021-01-11-shop-time-insider-take/featured_hu61ddda199b0e8f17f0b968abecd0f31a_4397132_720x0_resize_q90_lanczos.jpg" alt="" class="featured-image">
    <span class="article-header-caption"><a href="https://www.katieyarnold.com/">Drawing by Katie Yarnold</a></span>
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      


<p><a href="https://shipt.tech/shop-time-and-the-area-of-a-square-dcc9cb055368">Shop Time and the Area of a Square</a> is an article written on July 20th, 2020 for my current employer, a grocery delivery company called Shipt, to articulate how we leveraged data analytics to understand the minimum shop time for finding one item at a retailer. Upon further review, that process has taught me a lot about developing machine learning models in industry. So I’d like to revisit the article with some additional commentary and insights on how Analytics drive ML Model Development (in industry).</p>
<p>From time to time, I enjoy listening to the Lex Fridman Podcast and recently I heard him interviewing Charles Isbell and Michael Littman; for anyone attempting to enter the space and deploy a machine learning model, the clip below is the ML gospel; I hope you enjoy it. 😄</p>
<p>An astute modeler should know that a clever or fancy algorithm can lose or perform equally to a simpler model with superior data.</p>
<p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/8wVXyT7gKxI" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>
</p>
<p><br></p>
<p>So if you didn’t know - it’s the data, stupid! Stay close to the data because she’s your friend. The entire interview can be heard/watched <a href="https://youtu.be/yzMVEbs8Zz0">here</a>. <a href="https://homes.cs.washington.edu/~pedrod/papers/cacm12.pdf">A Few Useful Things to Know About Machine Learning</a> is another article that I found insightful about the use of data in algorithms and the desired goal of the Data Scientist or Modeler.</p>
<div id="why-is-industry-different-part-1" class="section level2">
<h2>Why is Industry Different (Part 1)?</h2>
<p>In industry, the data is messy. In academics, not as much. Academic programs at both the undergraduate and (some) graduate levels ignore the Exploratory Data Analysis (EDA) aspect of model development.</p>
<p>In my experience, emphasis is not on the deployment of an advance method or model. As Charles Isbell has said, “the data is almost more important than the algorithm”.</p>
<p>So I’d like to go deeper. Below is the distribution of Shop Times for single-item orders.</p>
<p><img src="images/shop_times_dist0.png" width="80%" style="display: block; margin: auto;" /></p>
<p>There you go - with a few lines of code in both R and SQL - we made a graph. Awesome!</p>
<p>But what do we know about the actual task of shopping from this distribution? Some thoughts (after reading the graph from left to right):</p>
<ul>
<li>Some people are really fast shoppers with some data being negative (see the little blip on the left side of the graph)</li>
<li>The largest spike (aka mode) appears to occur at less than a minute of actual shopping time</li>
<li>At roughly three minutes we see a peak, followed by decreasing instances of longer shop times</li>
<li>A very long right tail</li>
</ul>
<p>I hope that exercise shows the limited nature of seeing data only through the lens of the numbers on a table or graph.</p>
<p>The actual task of shopping an order cannot be understood merely by staring at a graph and hypothesizing about shopper behavior. At Shipt, I am also a shopper. This business is about people, not machine learning models. So I physically did the work.</p>
<figure>
<p><img src="images/venchei_shopper.jpg" alt="Venchei Shipt Shopper" width="40%" height="100%"/></p>
<figcaption>
I went into the field as an ‘undercover’ Shipt Shopper. 😉
</figcaption>
</figure>
<p>Giving students curated datasets dismisses how the game is played in reality and leaves a hole in the students’ fundamental training. Sometimes you gotta go into the field and actually do some heavy lifting (or shopping).</p>
<p>So I open the Shipt Shopper app and see an order such as the following:</p>
<div class="figure" style="text-align: center"><span id="fig:offercard"></span>
<img src="images/order_offer_og.jpg" alt="OG - Order Offer Card" width="40%" />
<p class="caption">
Figure 1: OG - Order Offer Card
</p>
</div>
<p>Since I want the experience of working as a professional Shipt Shopper, I skate to Foods Co. and shop a couple orders together. I believe (more seasoned) shoppers refer to these as ‘doubles’. This was a rookie mistake.</p>
<p>You see while shopping in Alabama, I had a car. I’ve since relocated to my companies’ San Francisco office and currently commute via electric skateboard and public transportation such as BART or rideshare (LYFT/UBER).</p>
<p>Shopping a ‘double’ resulted in the following at checkout:</p>
<div class="row">
<div class="col-md-6">
<figure>
<p><img src="images/cart.jpg" alt="Grocery Cart" width="55%" height="100%"/></p>
<figcaption>
A Full Cart! 😓
</figcaption>
</figure>
</div>
<div class="col-md-6">
<figure>
<p><img src="images/cashier.jpg" alt="Checking Out" width="100%" height="100%"/></p>
<figcaption>
At Checkout
</figcaption>
</figure>
</div>
</div>
<p>That experience led to some internal discussions about ‘uncovering’ order metadata such as its contents.</p>
<p>In the image below you see two twelve-packs of Crush orange soda and two six-packs of Sunny D. This order was very heavy.</p>
<p><img src="images/backpack.jpg" width="40%" style="display: block; margin: auto;" /></p>
<p>Innovations by the Shipt Product team led to the modern version of the Offer Card where shoppers can now see the underlying order contents via the List Preview.</p>
<div class="row">
<div class="col-md-6">
<figure>
<p><img src="images/offer_card.jpeg" alt="Shopper Offer Card" width="100%" height="100%"/></p>
<figcaption>
Shopper Order Offer Card
</figcaption>
</figure>
</div>
<div class="col-md-6">
<figure>
<p><img src="images/preview.jpeg" alt="List Preview" width="35%" height="100%"/></p>
<figcaption>
Order List Preview
</figcaption>
</figure>
</div>
</div>
<p>You see the model development process (in industry) <strong><em>does not</em></strong> consist of:</p>
<ol style="list-style-type: decimal">
<li>Read about a cutting edge algorithm.</li>
<li>Find some data at work.</li>
<li>Implement cutting edge algorithm.</li>
<li>Business makes a lot of money and you get rich.</li>
<li>Repeat.</li>
</ol>
<p>The model development process (in industry) consist of:</p>
<ol style="list-style-type: decimal">
<li><p>The Business Problem: <em>What problem are you trying to solve?</em></p></li>
<li><p>The Data: <em>Do you have the data needed to solve the problem? Do you need to create an ETL pipeline for the data?</em></p></li>
<li><p>Data Cleaning and Mining: <em>Not all data is good data. Choose wisely!</em></p>
<ul>
<li><em>Exploration with charts and graphs is always a winner but conduct some field research.</em></li>
</ul></li>
<li><p>Baseline: <em>Set the baseline with a simple linear model, benchmark or heuristic.</em></p></li>
<li><p>Feature Engineering: <em>Feature Engineering is domain specific. So know your business and your customer. Also, checkout Max Kuhn’s book, <a href="http://www.feat.engineering/">Feature Engineering and Selection</a>.</em></p></li>
<li><p>Repeat: <em>Iterate and repeat steps 4-6 until you find the best performing model versus your benchmark or heuristic.</em></p></li>
<li><p>Deployment: <em>Get it into production.</em></p></li>
<li><p>Anomaly Detection: <em>Model’s decay and drift over time. Automate the detection of anomalies becuase they will happen.</em></p></li>
</ol>
<p>Again, this business is about people and solving problems for them, not machine learning models. To actually understand the problem, I went into the Shopper App and delivered orders for members. I then leveraged that research and those experiences to help me get to know the data, its strengths and weaknesses.</p>
</div>
<div id="what-about-model-performance" class="section level2">
<h2>What About Model Performance?</h2>
<p>How well should a model perform? As my Econometrics Professor Matt Holt would say, “Depends on your Employer”. If we trained our model on data including possible outliers (on the left end of the distribution) then the model will perform poorly. Suppose you run a bank, under-predicting the model’s target (Shop Times for Shipt) could lead to financial ruin.</p>
<p>Suppose you’re a head coach preparing the team for a track meet or basketball game. As the coach, do you want the athlete that has trained for the event with ten mediocre practices or an athlete with 1000 days of varying forms of practice (shooting three pointers, free throws, layups, etc); The data matters, <strong><em>PERIOD</em></strong>.</p>
<p>When modeling, generalization and representation matters. Stay close to the data and remember, “the data is almost more important than the algorithm.” A clever or fancy algorithm can lose or perform equally to a simpler model with superior data.</p>
<p>With that out of the way, let’s get back to the article…</p>
</div>
<div id="how-long-does-it-take-to-find-one-item-in-a-grocery-store" class="section level2">
<h2>How long does it take to find one item in a grocery store?</h2>
<p>Go ahead and take a guess, I’ll wait… What did you guess - ten, fifteen minutes? When conducting personal shopping such a thought may come to mind while under a time crunch. What if it’s lunch time and you only have 40 minutes to run into the grocery store to grab dinner and snacks before you have to pick up the kids from day care. So how long does it take to find one item in a grocery store? Is that item in the front or rear of the store? Do you need help from a store associate while searching for that one item?</p>
<p>I too wrestled with this question. While working as an analyst for Shipt, I leverage common notions in both geometry and physics to determine which data are useful for a machine learning project that estimates what we call <strong><em>“Shop Time”</em></strong>.</p>
</div>
<div id="what-is-shop-time" class="section level2">
<h2>What is Shop Time?</h2>
<p>Shop Time is the duration of time from start to finish, that is needed to find an item and checkout. Shipt deeply values it’s relationship with our members and shoppers. Thus, surfacing Shop Time expectations allows a shopper to better plan, be more efficient, and provide an amazing experience for the member.</p>
<p>When developing a model, deciding which data to value is paramount. Data selected to train a model is important as our model predictions will be consumed by our shoppers via what we call the <strong><em>offer card</em></strong>.</p>
<p>Shipt Shoppers can preview an order by looking it’s offer card - a card located in-app that provides order details. The image below is an order offer card from the Shipt Shopper App. The 1 hour 15 minute estimate is not only the shop time but also the drive time; moreover, the order has 53 total items, with an estimated pay of <span class="math inline">\(24\)</span> - <span class="math inline">\(32\)</span> tip not included.</p>
<div class="figure" style="text-align: center"><span id="fig:offercard20"></span>
<img src="images/offer_card.jpeg" alt="Order Offer Card" width="60%" height="20%" />
<p class="caption">
Figure 2: Order Offer Card
</p>
</div>
</div>
<div id="identifying-outliers" class="section level2">
<h2>Identifying Outliers</h2>
<p>If we choose data that was poorly captured then model predictions will result in a false signal and wildly varying shop time expectations for our shoppers. Therein lies the tricky part of the problem, the <a href="https://towardsdatascience.com/understanding-the-bias-variance-tradeoff-165e6942b229">Bias-Variance Trade-Off</a>. Removing too much data decreases our Bias but increases our Variance (aka over-fitting to the training examples).</p>
</div>
<div id="why-is-industry-different-part-2" class="section level2">
<h2>Why is Industry Different (Part 2)?</h2>
<p>In hindsight, while studying economics as a graduate student, this idea was not well articulated. Outliers and bad data can destroy model performance In academics, data sets are generally cleaned such that students can quickly get up to speed on the methods and algorithms but more time should be devoted to Exploratory Data Analysis (EDA) and proper Outlier identification and Removal.</p>
<p>The <a href="https://towardsdatascience.com/predicting-vs-explaining-69b516f90796">explain vs predict</a> paradigm has lead to this dynamic. Economists love to explain relationships and thus seek an optimal fit that can best explain market behavior; an economist might argue, “It’s all just statistics.” In return, the ML modeler might argue that if the goal is accurate predictions then the explanation is not a relevant concern; thus, they demand generalization.</p>
<p>It is true, a proper model must generalize well to new data. In this case, we started the data selection process by determining reasonable lower bounds for Shop Time. Additional resources/literature on this topic can be found by reading <a href="https://www.datascienceblog.net/post/commentary/inference-vs-prediction/">Inference vs Prediction</a> or <a href="https://hdsr.mitpress.mit.edu/pub/a7gxkn0a/release/6">A Balanced Perspective on Prediction and Inference for Data Science in Industry</a>.</p>
<p>Let’s get back to the article….</p>
<p>In physics, there’s a well known mental model called <a href="https://fs.blog/2018/04/first-principles/">First Principles Reasoning</a>. Thinking via First Principles allows a person to start from scratch while questioning every known assumption about a specific domain, then building a new (hopefully innovative) solution based upon new thinking about those assumptions.</p>
<p>A strong analyst should have many tools in the toolbox, reasoning by First Principles is one such tool. After thinking deeply about a reasonable floor, one should consider the most basic order type, an order (smallest possible) with <strong><em>only</em></strong> one item. We’ll call the associated shop time for a single-item order the <strong><strong>Minimum Shop Time</strong></strong>.</p>
<p>So how long does it take to find one item in a grocery store? If you guessed 10 minutes, then I need you to explain why. As my friend Maliha would say, “In God we trust. All others must provide data.” This the art of Data Science.</p>
<p>In order to create a model that has high value impact for a business, a modeler should start by framing the problem in the most basic form, build an understanding of the limitations of the data and then find the balance between signal and noise (or Bias and Variance) for your target.</p>
<p>In a perfect world, all data collected would correspond perfectly to the timestamps of the user interaction within the app. However, weather, buildings and associated natural interference leads to suspicious data captured in the system.</p>
<p>We’ve observed outliers such as shop times that are negative, null, less than one minute, or – on the extreme right – up to 12 hours. To develop a model that reasonably represents the actual task of shopping, we had to consider the minimum time it takes and remove recorded data that may be incorrectly captured by the system.</p>
<p>Below is the distribution of Shop Times at Shipt for single-item orders. This graph has been enhanced with a line to delinate possible outliers and colorized.</p>
<div class="figure" style="text-align: center"><span id="fig:offercard10"></span>
<img src="images/shop_times_dist1.png" alt="Our database captured hundreds of zero or negative shop times." width="70%" />
<p class="caption">
Figure 3: Our database captured hundreds of zero or negative shop times.
</p>
</div>
</div>
<div id="grocery-shopping-axioms-and-theory" class="section level2">
<h2>Grocery Shopping Axioms and Theory</h2>
<p>If you studied mathematics, you have probably heard of <a href="https://en.wikipedia.org/wiki/Euclid%27s_Elements">Euclid’s Elements</a>. Euclid’s Elements is a set of books attributed to Euclid of Alexandria, around 300 BC. During that time, Euclid’s Elements were considered a bible of sorts for mathematics. His theories on <a href="https://en.wikipedia.org/wiki/Number_theory">Number Theory</a> and <a href="https://en.wikipedia.org/wiki/Geometry">Geometry</a> are considered fundamental to a proper mathematics education. Moreover in mathematics, understood truths are called Axioms and Postulates. Here we present our Elements (Axioms and Postulates) for Grocery Shopping:</p>
<ol style="list-style-type: decimal">
<li><p>An order for delivery has a minimum of one product and one item (Shipt refers to this as an order line - similar to a line item on a receipt)</p></li>
<li><p>Shop Times are positive, real numbers, <span class="math inline">\({\rm I\!R} ^ {+}\)</span></p></li>
<li><p>As number of products and total items requested increases, so does the duration of time to shop</p></li>
</ol>
<p><strong>Note</strong>: This article attempts to narrow the focus of number two; meaning we’re really interested in understanding which data to value for training examples. For additional reading on the Data Valuation and Quality, read some on <a href="https://arxiv.org/pdf/1904.02868.pdf">Data Shapley</a>.</p>
<p>We have data about the area (or size) of stores that we service. Moreover, we can leverage that information along with member feedback to develop a model that reasonably estimates the time it takes to shop a single-item order.</p>
<p>In order to meet or exceed delivery expectations, an experienced shopper will maximize their time by:</p>
<p>Shipt Members assume and expect the following:</p>
<ol style="list-style-type: decimal">
<li>Arriving at the store early</li>
<li>When appropriate, communicating order issues quickly</li>
<li>Delivering all requested and available products on-time</li>
</ol>
<p>Let’s suppose you’re a shopper who received our Minimum Shop Time order. Ok, you have an easy order. It’s only one item. What could go wrong? Well, what if the item is in the back of the store? How long might it take you to get there? How could you minimize this time?</p>
</div>
<div id="why-is-industry-different-part-3" class="section level2">
<h2>Why is Industry Different (Part 3)?</h2>
<p>I think the dynamics of real world liability is something that is a miss in academic programs; meaning - what is at risk? In predicting shop times, we’d prefer to over-predict than under-predict. If you drive an autonomous vehicle, would you prefer the system over-predict, have a false positive and stop prematurely or under-predict, have a false negative and stop too late?</p>
<p>If designing an ABS system that uses computer vision to calculate crash probabilities mid-drive, you’d prefer the system stop early, a false positive, than late or not at all. These dynamics take the problem from ‘fun exercise’ to:</p>
<p><img src="https://media.giphy.com/media/3010TVhWwXy2N9OUGQ/giphy.gif" width="80%" style="display: block; margin: auto;" /></p>
<p><br></p>
<p>All funny gifs aside, let’s get back to the article…</p>
<p>Let’s assume the store’s perimeter is that of a rectangle, particularly a square, and that information regarding the size of the grocery store is known.</p>
<p><img src="images/square.png" width="65%" style="display: block; margin: auto;" /></p>
<p>If you remember from grade school, the area of a square is:</p>
<p><span class="math display">\[
   \mbox{(Equation I.)} \substack{\text{Area} \\ \text{of a Square}} = (\mbox{Length of the Side}) ^ {2}
\]</span></p>
<p><br/></p>
<p>Furthermore, via the Pythagorean Theorem, the length of the diagonal is:</p>
<p><span class="math display">\[
   \mbox{(Equation II.)} \substack{\text{Length of the Diagonal} \\ \text{of a Square}} = \mbox{Length of Side} * \sqrt{2}
\]</span></p>
<p><br/></p>
<p>By taking the square root of (Equation 1), (<span class="math inline">\(\sqrt[]{(\mbox{Length of the Side}) ^ {2}}\)</span>), we now have a way to determine the length of the side of the store; more importantly, the shortest possible distance through the store - a straight line!</p>
<p>Obviously, this violates the laws of reality, a shopper likely cannot traverse the diagonal of a grocery store; but, it provides an important insight that we will leverage when we select the data for our model.</p>
<p>Finally, if there was a way to relate this distance and time then we could evaluate the earlier guess.</p>
</div>
<div id="physics-insert-equations-of-motion" class="section level2">
<h2>Physics: Insert {Equations of Motion}…</h2>
<p>In physics, <a href="https://en.wikipedia.org/wiki/Equations_of_motion">equations of motion</a> are equations that describe the behavior of a physical system in terms of its motion as a function of time (i.e. how fast can a Shipt Shopper cross a distance). Let’s leverage the rate, time, and distance relationship of</p>
<p><span class="math display">\[
   \mbox{Walking Pace} * \mbox{Shop Time} = \mbox{Distance Traveled}
\]</span>
<br/>
<span class="math display">\[
  \mbox{By division, Shop Time} = \frac{\mbox{Distance Traveled}}{\mbox{Walking Pace}}
\]</span></p>
<p><br/></p>
<p>Additional functional forms may include the following,</p>
<p><span class="math display">\[
  \substack{\text{Shop} \\ \text{Time}} = \frac{\sum{\mbox{Distance Traveled}}}{\mbox{Walking Pace}} + \frac{\sum{\mbox{Items in Order}}}{\mbox{Item Identification Pace}} + ... + \epsilon 
\]</span></p>
<p>where <span class="math inline">\(\epsilon = \mbox{unexplainable error}\)</span></p>
<p>A human <a href="https://en.wikipedia.org/wiki/Walking#:~:text=Although%20walking%20speeds%20can%20vary,miles%20per%20hour%20(mph)">walks</a> at roughly 3.1 Miles per Hour. After converting to feet per minute, we get 272.8 feet per minute.</p>
</div>
<div id="so-whats-your-point" class="section level2">
<h2>…So what’s your point?…</h2>
<p>Since we know the distance to the rear of the store and our walking pace, we now have a way to determine if our time to shop guess was reasonable.</p>
<p>We can now flag Shop Times in our data that are below the computed Minimum Shop Time threshold.</p>
<p><span class="math display">\[
  \mbox{Definition,} \substack{\text{The Minimum} \\ \text{Shop Time}} \approx \frac{\sqrt{2*\mbox{Area of a Store}}}{136.4 \frac{feet}{minute}}
\]</span></p>
</div>
<div id="why-is-industry-different-part-4" class="section level2">
<h2>Why is Industry Different (Part 4)?</h2>
<p>This is a simple ‘model’ filled with unrealistic expectations, right? That’s not the point of this discussion. Might - It’s the data, stupid! A simple model with superior data can outperform a more clever model with noise.</p>
<p>In graduate Econometrics courses we learn about parsimony and our preference for simpler, highly performant models. However, those models are only performant if the data is properly optimized for the correct signal. Finding that optimal signal is both an art (specific to the domain) and a science (the computational and quantitative methods) used to find signal.</p>
<p>Getting ML training with clean data is lovely but the art of machine learning is understanding your domain and engineering solutions that a databot can not. This requires strong analytics and possibly going into the field and physically doing the work.</p>
</div>
<div id="frameworkmodel-assumptions-and-limitations" class="section level2">
<h2>Framework/Model Assumptions and Limitations</h2>
<p>Our model is not perfect. It makes assumptions about a shopper’s ability to walk, locate an item and checkout. These assumptions are as follows:</p>
<ol style="list-style-type: decimal">
<li><p>Our model assumes the worst possible case for an item’s location — an item is located in the rear corner of the store opposite the shopper’s entrance.</p></li>
<li><p>The shortest possible path to the rear of the store can be traversed via the diagonal; a shopper’s ability to enter the store and walk to the rear via the diagonal (a straight line) represents the optimal path to the rear of the store.</p></li>
<li><p>We assume there are minimal impediments to the shoppers ability to walk at the average speed (walking pace of human is assumed).</p></li>
<li><p>Finally, we assume a shopper can locate an item that is stocked, pay the cashier, and walk out of the store unencumbered; meaning, at this point we are leveraging this model to gain insight about shop time.</p></li>
</ol>
<p>Despite violating the physical properties of a store (i.e., a shopper cannot walk through the aisles of a store via the diagonal), this model provides an insight into reasonable Shop Time expectations for a shopper who is fulfilling a single-item order. For all larger orders, we expect larger Shop Times (Axiom 3); thus, Shop Times recorded below the threshold for all order sizes will be marked as potential outliers.</p>
</div>
<div id="closing-thoughts-and-reflections" class="section level2">
<h2>Closing Thoughts and Reflections</h2>
<p>When attempting to model a complex world, sometimes it makes sense to keep your thinking simple. Here we developed a simple model to approximate the time to shop a single-item order. We are now able to use the equation and flag all orders for removal with shop times before the computed threshold for our training set. Let’s end with an example:</p>
<p>A typical small-size format <a href="https://corporate.target.com/article/2018/07/small-format-stores#:~:text=Just%20how%20small%20do%20our,size%20130%2C000%20square%2Dfoot%20store.">Target</a> is about 40,000 square feet (full-size <span class="math inline">\(\approx\)</span> 130,000 sq. ft.). That means we should expect the minimum Shop Time at a small-format Target to be</p>
<p><span class="math display">\[
  \substack{\text{Target (small-size format)} \\ \text{Minimum Shop Time}} \approx \frac{\sqrt{\mbox{80,000}}}{136.4 \frac{feet}{minute}} \approx \mbox{2 (or 2.09) minutes}
\]</span></p>
<center>
or
</center>
<p><span class="math display">\[
  \substack{\text{Target (full-size format)} \\ \text{Minimum Shop Time}} \approx \frac{\sqrt{\mbox{260,000}}}{136.4 \frac{feet}{minute}} \approx \mbox{4 (or 3.78) minutes}
\]</span></p>
<p>We can now remove all data below these computed thresholds. Amazing how a simple model can have profound impact on one’s thinking.</p>
<p>Never say you’ll be back in a minute!</p>
<p>Please feel free to leave a comment below. 😄</p>
<p>-V</p>
</div>

    </div>

    






<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/data-science/">data science</a>
  
  <a class="badge badge-light" href="/tag/machine-learning/">machine learning</a>
  
  <a class="badge badge-light" href="/tag/industry/">industry</a>
  
  <a class="badge badge-light" href="/tag/education/">education</a>
  
  <a class="badge badge-light" href="/tag/analytics/">analytics</a>
  
</div>



<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/&amp;text=Shop%20Time%20and%20the%20Area%20of%20a%20Square%20-%20Industry%20Insider%20Take" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/&amp;t=Shop%20Time%20and%20the%20Area%20of%20a%20Square%20-%20Industry%20Insider%20Take" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Shop%20Time%20and%20the%20Area%20of%20a%20Square%20-%20Industry%20Insider%20Take&amp;body=https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/&amp;title=Shop%20Time%20and%20the%20Area%20of%20a%20Square%20-%20Industry%20Insider%20Take" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="whatsapp://send?text=Shop%20Time%20and%20the%20Area%20of%20a%20Square%20-%20Industry%20Insider%20Take%20https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=https://davencheicodes.com/post/2021-01-11-shop-time-insider-take/&amp;title=Shop%20Time%20and%20the%20Area%20of%20a%20Square%20-%20Industry%20Insider%20Take" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://davencheicodes.com/"><img class="avatar mr-3 avatar-circle" src="/author/venchei-t.-sanders/avatar_hu3bf5e09aed259abff1000eada9fbbc9d_1822924_270x270_fill_q90_lanczos_center.jpg" alt="Venchei T. Sanders"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://davencheicodes.com/">Venchei T. Sanders</a></h5>
      <h6 class="card-subtitle">Associate Data Scientist</h6>
      
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.facebook.com/davencheicodes" target="_blank" rel="noopener">
        <i class="fab fa-facebook"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/vtsanders" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.instagram.com/davencheicodes" target="_blank" rel="noopener">
        <i class="fab fa-instagram"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/davencheicodes" target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://twitter.com/davencheicodes" target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>







<section id="comments">
  
    

<script defer src="https://cdn.commento.io/js/commento.js"></script>
<div id="commento"></div>


  
</section>








  
  
  <div class="article-widget content-widget-hr">
    <h3>Related</h3>
    <ul>
      
      <li><a href="/post/2020-06-08-rstudio2020-thoughts-and-reflections/">Reflections on RStudio::Conf 2019 &amp; 2020</a></li>
      
    </ul>
  </div>
  





  </div>
</article>

      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.0/mermaid.min.js" integrity="sha512-ja+hSBi4JDtjSqc4LTBsSwuBT3tdZ3oKYKd07lTVYmCnTCor56AnRql00ssqnTOR9Ss4gOP/ROGB3SfcJnZkeg==" crossorigin="anonymous" title="mermaid"></script>
      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js" integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/latex.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/python.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.min.js" integrity="sha512-SeiQaaDh73yrb56sTW/RgVdi/mMqNeM2oBwubFHagc5BkixSpP1fvqF47mKzPGWYSSy4RwbBunrJBQ4Co8fRWA==" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/wowchemy.min.4c2bca31150ce93c5a5e43b8a50f22fd.js"></script>

    






  
  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    Venchei Sanders © 2021
  </p>

  
  






  <p class="powered-by">

    All views expressed, written, or otherwise are opinions of my own and not that of my current (or former) employer.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" class="back-to-top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
